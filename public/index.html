<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Stranger Chat</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'media',
      theme: {
        extend: {
          colors: {
            primary: {
              DEFAULT: '#6366f1'
            }
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen flex items-center justify-center">
  <!-- Intro Page -->
  <div id="intro" class="w-full max-w-2xl bg-gray-800 shadow-xl rounded-2xl p-10 text-center">
    <h1 class="text-4xl font-bold mb-4 text-primary">Welcome to Stranger Chat</h1>
    <p class="text-gray-300 mb-8 text-lg">Chat anonymously with a random stranger of the opposite gender.</p>
    <button id="goChat" class="px-8 py-4 rounded-xl bg-primary text-white hover:bg-indigo-700 transition text-lg">Start</button>
  </div>

  <!-- Chat Page -->
  <div id="main" class="hidden w-full max-w-5xl h-[80vh] bg-gray-800 shadow-2xl rounded-2xl overflow-hidden flex flex-col">
    <div id="join" class="m-auto w-full max-w-md space-y-6 text-center">
      <h2 class="text-3xl font-semibold text-primary">Find a Stranger</h2>
      <div>
        <label for="gender" class="block text-gray-300 font-medium mb-2">Select Your Gender</label>
        <select id="gender" class="w-full border rounded-lg p-3 bg-gray-900 text-gray-100">
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>
      </div>
      <button id="start" class="w-full px-6 py-4 rounded-xl bg-primary text-white hover:bg-indigo-700 transition text-lg">Start Chat</button>
      <p class="text-sm text-gray-400">You’ll be paired with someone of the opposite gender.</p>
    </div>

    <div id="chat" class="hidden flex flex-col flex-1">
      <!-- Header -->
      <div class="flex justify-between items-center bg-gray-900 px-6 py-3 border-b border-gray-700">
        <div class="text-sm text-gray-300">You: <span id="username"></span></div>
        <div class="text-sm text-gray-300">Partner: <span id="partnerName">—</span> (<span id="partnerGender">—</span>)</div>
        <button id="leaveBtn" class="px-4 py-2 rounded-lg text-sm bg-red-500 text-white hover:bg-red-500">Leave</button>
      </div>

      <!-- Messages -->
      <div id="messages" class="flex-1 border-b border-gray-700 p-6 overflow-y-auto bg-gray-900 space-y-3"></div>
      <div id="typing" class="text-sm text-gray-400 px-6"></div>

      <!-- Composer -->
      <div class="flex gap-3 p-6 bg-gray-900">
        <button id="skip" class="px-4 py-2 rounded-lg text-sm bg-red-500 text-white hover:bg-red-600">Skip</button>
        <input id="msg" class="flex-1 border border-gray-700 rounded-lg p-4 bg-gray-800 text-gray-100" placeholder="Type a message" />
        <button id="send" class="px-6 py-4 rounded-lg bg-primary text-white hover:bg-indigo-700">Send</button>
      </div>
    </div>

    <div id="status" class="text-center text-gray-400 p-3">Not connected</div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/client.js"></script>
  <script>
    document.getElementById('goChat').onclick = () => {
      document.getElementById('intro').classList.add('hidden');
      document.getElementById('main').classList.remove('hidden');
    };
  </script>
</body>
</html>